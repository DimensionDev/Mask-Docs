"use strict";(self.webpackChunkmask_docs=self.webpackChunkmask_docs||[]).push([[928],{3905:function(e,n,t){t.d(n,{Zo:function(){return l},kt:function(){return d}});var o=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,o,r=function(e,n){if(null==e)return{};var t,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)t=i[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)t=i[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=o.createContext({}),p=function(e){var n=o.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},l=function(e){var n=p(e.components);return o.createElement(s.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},m=o.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),m=p(t),d=r,b=m["".concat(s,".").concat(d)]||m[d]||u[d]||i;return t?o.createElement(b,a(a({ref:n},l),{},{components:t})):o.createElement(b,a({ref:n},l))}));function d(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,a=new Array(i);a[0]=m;var c={};for(var s in n)hasOwnProperty.call(n,s)&&(c[s]=n[s]);c.originalType=e,c.mdxType="string"==typeof e?e:r,a[1]=c;for(var p=2;p<i;p++)a[p]=t[p];return o.createElement.apply(null,a)}return o.createElement.apply(null,t)}m.displayName="MDXCreateElement"},4812:function(e,n,t){t.r(n),t.d(n,{assets:function(){return l},contentTitle:function(){return s},default:function(){return d},frontMatter:function(){return c},metadata:function(){return p},toc:function(){return u}});var o=t(7462),r=t(3366),i=(t(7294),t(3905)),a=["components"],c={title:"Connection",sidebar_position:3},s=void 0,p={unversionedId:"web3/connection",id:"web3/connection",title:"Connection",description:"When we say create a connection with the network, it means we got a way to send request and receive response with a node in the network. The communication protocol might be HTTP or WebSocket. Generally speaking, developers don't need to compose the request payload manually. The SDK will come to help. For EVM, we have ethers.js and web3.js; for Flow, we have FCL.",source:"@site/docs/web3/connection.md",sourceDirName:"web3",slug:"/web3/connection",permalink:"/docs/web3/connection",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/web3/connection.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Connection",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"States",permalink:"/docs/web3/web3-state"},next:{title:"Third-Party Data Hub",permalink:"/docs/web3/hub"}},l={},u=[],m={toc:u};function d(e){var n=e.components,t=(0,r.Z)(e,a);return(0,i.kt)("wrapper",(0,o.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"When we say create a connection with the network, it means we got a way to send request and receive response with a node in the network. The communication protocol might be HTTP or WebSocket. Generally speaking, developers don't need to compose the request payload manually. The SDK will come to help. For EVM, we have ",(0,i.kt)("inlineCode",{parentName:"p"},"ethers.js")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"web3.js"),"; for Flow, we have ",(0,i.kt)("inlineCode",{parentName:"p"},"FCL"),"."),(0,i.kt)("p",null,"We designed the ",(0,i.kt)("inlineCode",{parentName:"p"},"Connection")," to have two methods."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"export interface ConnectionState<Web3, Web3ConnectionOptions, Web3Connection> {\n    /** Get web3 SDK instance */\n    getWeb3?: (options?: Web3ConnectionOptions) => Promise<Web3>\n    /** Get connection */\n    getConnection?: (options?: Web3ConnectionOptions) => Promise<Web3Connection>\n}\n")),(0,i.kt)("p",null,"To feed the UI components with the same APIs we create ",(0,i.kt)("inlineCode",{parentName:"p"},"Web3Connection"),". It describes the commonality of networks. Paste a snippet from the source code."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"export interface Connection<\n    ChainId,\n    SchemaType,\n    ProviderType,\n    Signature,\n    Block,\n    Transaction,\n    TransactionDetailed,\n    TransactionSignature,\n    Web3,\n    Web3ConnectionOptions = ConnectionOptions<ChainId, ProviderType, Transaction>,\n> {\n    /** Get the latest block number. */\n    getBlockNumber(options?: Web3ConnectionOptions): Promise<number>\n    /** Sign message */\n    signMessage(dataToSign: string, signType?: string, options?: Web3ConnectionOptions): Promise<Signature>\n    /** Send a transaction and wait for mining */\n    sendTransaction(transaction: Transaction, options?: Web3ConnectionOptions): Promise<string>\n    /** Build connection */\n    connect(options?: Web3ConnectionOptions): Promise<Account<ChainId>>\n}\n")),(0,i.kt)("p",null,"As you can see from the interface, those generic are slots waiting for definition from network. A network should define how are things like in its context."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const connection = useConnection(NetwrokPluginID.PLUGIN_EVM)\n\nconst signature = await connection.signMessage(message)\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const connection = useConnection()\n\nconst signature = await connection.signMessage(message)\n")))}d.isMDXComponent=!0}}]);